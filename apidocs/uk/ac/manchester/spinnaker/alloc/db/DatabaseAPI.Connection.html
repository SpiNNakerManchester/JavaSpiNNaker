<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>DatabaseAPI.Connection (SpiNNaker Java Host 7.3.1 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: uk.ac.manchester.spinnaker.alloc.db, interface: DatabaseAPI, interface: Connection">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":6,"i12":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DatabaseAPI.Connection.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">uk.ac.manchester.spinnaker.alloc.db</a></div>
<h1 title="Interface DatabaseAPI.Connection" class="title">Interface DatabaseAPI.Connection</h1>
</div>
<div class="contentContainer">
<section class="description">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code></dd>
</dl>
<dl>
<dt>Enclosing interface:</dt>
<dd><a href="DatabaseAPI.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI</a></dd>
</dl>
<hr>
<pre>public static interface <span class="typeNameLabel">DatabaseAPI.Connection</span>
extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></pre>
<div class="block">Connections made by the database engine bean. Its methods do not throw
 checked exceptions. The connection is thread-bound, and will be cleaned
 up correctly when the thread exits (ideal for thread pools).</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="tableTab" onclick="show(4);">Abstract Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Closes this connection and releases any resources.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isReadOnly()">isReadOnly</a></span>()</code></th>
<td class="colLast">
<div class="block">Retrieves whether this connection is in read-only mode.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#query(java.lang.String)">query</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;sql)</code></th>
<td class="colLast">
<div class="block">Create a new query.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#query(java.lang.String,boolean)">query</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;sql,
boolean&nbsp;lockType)</code></th>
<td class="colLast">
<div class="block">Create a new query.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#query(org.springframework.core.io.Resource)">query</a></span>&#8203;(<a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html?is-external=true" title="class or interface in org.springframework.core.io" class="externalLink">Resource</a>&nbsp;sqlResource)</code></th>
<td class="colLast">
<div class="block">Create a new query.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#query(org.springframework.core.io.Resource,boolean)">query</a></span>&#8203;(<a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html?is-external=true" title="class or interface in org.springframework.core.io" class="externalLink">Resource</a>&nbsp;sqlResource,
boolean&nbsp;lockType)</code></th>
<td class="colLast">
<div class="block">Create a new query.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#rollback()">rollback</a></span>()</code></th>
<td class="colLast">
<div class="block">Undoes all changes made in the current transaction and releases any
 database locks currently held by this connection.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transaction(boolean,uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.Transacted)">transaction</a></span>&#8203;(boolean&nbsp;lockForWriting,
<a href="DatabaseAPI.Transacted.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Transacted</a>&nbsp;operation)</code></th>
<td class="colLast">
<div class="block">A nestable transaction runner.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transaction(boolean,uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.TransactedWithResult)">transaction</a></span>&#8203;(boolean&nbsp;lockForWriting,
<a href="DatabaseAPI.TransactedWithResult.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.TransactedWithResult</a>&lt;T&gt;&nbsp;operation)</code></th>
<td class="colLast">
<div class="block">A nestable transaction runner.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.Transacted)">transaction</a></span>&#8203;(<a href="DatabaseAPI.Transacted.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Transacted</a>&nbsp;operation)</code></th>
<td class="colLast">
<div class="block">A nestable transaction runner.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.TransactedWithResult)">transaction</a></span>&#8203;(<a href="DatabaseAPI.TransactedWithResult.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.TransactedWithResult</a>&lt;T&gt;&nbsp;operation)</code></th>
<td class="colLast">
<div class="block">A nestable transaction runner.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code><a href="DatabaseAPI.Update.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Update</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(java.lang.String)">update</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;sql)</code></th>
<td class="colLast">
<div class="block">Create a new update.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code><a href="DatabaseAPI.Update.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Update</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#update(org.springframework.core.io.Resource)">update</a></span>&#8203;(<a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html?is-external=true" title="class or interface in org.springframework.core.io" class="externalLink">Resource</a>&nbsp;sqlResource)</code></th>
<td class="colLast">
<div class="block">Create a new update.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="close()">close</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">close</span>()</div>
<div class="block">Closes this connection and releases any resources. The actual
 underlying connection may remain open if the connection pool wishes
 to maintain it, but this handle should not be retained by the caller
 after this point.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html?is-external=true#close()" title="class or interface in java.lang" class="externalLink">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang" class="externalLink">AutoCloseable</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/Connection.html?is-external=true#close()" title="class or interface in java.sql" class="externalLink"><code>Connection.close()</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="rollback()">rollback</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">rollback</span>()</div>
<div class="block">Undoes all changes made in the current transaction and releases any
 database locks currently held by this connection.
 <p>
 This method should be used only when in a transaction; it is only
 required when the transaction is to be rolled back without throwing
 an exception, as the normal behaviour of the internal transaction
 manager is to roll the transaction back when an exception leaves the
 code inside the transaction boundary.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/Connection.html?is-external=true#rollback()" title="class or interface in java.sql" class="externalLink"><code>Connection.rollback()</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isReadOnly()">isReadOnly</a></h3>
<div class="memberSignature"><span class="returnType">boolean</span>&nbsp;<span class="memberName">isReadOnly</span>()</div>
<div class="block">Retrieves whether this connection is in read-only mode.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this connection is read-only; <code>false</code>
         otherwise.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/java/sql/Connection.html?is-external=true#isReadOnly()" title="class or interface in java.sql" class="externalLink"><code>Connection.isReadOnly()</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="transaction(boolean,uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.Transacted)">transaction</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">transaction</span>&#8203;(<span class="arguments">boolean&nbsp;lockForWriting,
<a href="DatabaseAPI.Transacted.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Transacted</a>&nbsp;operation)</span></div>
<div class="block">A nestable transaction runner. If the <code>operation</code> completes
 normally (and this isn't a nested use), the transaction commits. If
 an exception is thrown, the transaction is rolled back.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lockForWriting</code> - Whether to lock for writing. Multiple read locks can be
            held at once, but only one write lock. Locks
            <em>cannot</em> be upgraded (because that causes
            deadlocks).</dd>
<dd><code>operation</code> - The operation to run</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.TransactedWithResult)"><code>transaction(DatabaseEngine.TransactedWithResult)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.Transacted)">transaction</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">transaction</span>&#8203;(<span class="arguments"><a href="DatabaseAPI.Transacted.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Transacted</a>&nbsp;operation)</span></div>
<div class="block">A nestable transaction runner. If the <code>operation</code> completes
 normally (and this isn't a nested use), the transaction commits. If
 an exception is thrown, the transaction is rolled back. This uses a
 write lock.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>operation</code> - The operation to run</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.TransactedWithResult)"><code>transaction(DatabaseEngine.TransactedWithResult)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.TransactedWithResult)">transaction</a></h3>
<div class="memberSignature"><span class="typeParameters">&lt;T&gt;</span>&nbsp;<span class="returnType">T</span>&nbsp;<span class="memberName">transaction</span>&#8203;(<span class="arguments"><a href="DatabaseAPI.TransactedWithResult.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.TransactedWithResult</a>&lt;T&gt;&nbsp;operation)</span></div>
<div class="block">A nestable transaction runner. If the <code>operation</code> completes
 normally (and this isn't a nested use), the transaction commits. If
 an exception is thrown, the transaction is rolled back. This uses a
 write lock.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - The type of the result of <code>operation</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>operation</code> - The operation to run</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the value returned by <code>operation</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.Transacted)"><code>transaction(DatabaseEngine.Transacted)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="transaction(boolean,uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.TransactedWithResult)">transaction</a></h3>
<div class="memberSignature"><span class="typeParameters">&lt;T&gt;</span>&nbsp;<span class="returnType">T</span>&nbsp;<span class="memberName">transaction</span>&#8203;(<span class="arguments">boolean&nbsp;lockForWriting,
<a href="DatabaseAPI.TransactedWithResult.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.TransactedWithResult</a>&lt;T&gt;&nbsp;operation)</span></div>
<div class="block">A nestable transaction runner. If the <code>operation</code> completes
 normally (and this isn't a nested use), the transaction commits. If
 an exception is thrown, the transaction is rolled back.</div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - The type of the result of <code>operation</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lockForWriting</code> - Whether to lock for writing. Multiple read locks can be
            held at once, but only one write lock. Locks
            <em>cannot</em> be upgraded (because that causes
            deadlocks).</dd>
<dd><code>operation</code> - The operation to run</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the value returned by <code>operation</code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#transaction(uk.ac.manchester.spinnaker.alloc.db.DatabaseAPI.Transacted)"><code>transaction(DatabaseEngine.Transacted)</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="query(java.lang.String)">query</a></h3>
<div class="memberSignature"><span class="returnType"><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></span>&nbsp;<span class="memberName">query</span>&#8203;(<span class="arguments"><a href="https://errorprone.info/api/latest/com/google/errorprone/annotations/CompileTimeConstant.html?is-external=true" title="class or interface in com.google.errorprone.annotations" class="externalLink">@CompileTimeConstant</a>
<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;sql)</span></div>
<div class="block">Create a new query. Usage pattern:
 <pre>
 try (var q = conn.query(SQL_SELECT)) {
     for (var value : q.call(mapper, argument1, argument2)) {
         // Do something with the mapped row
     }
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(SQL_SELECT)) {
     q.call(mapper, argument1, argument2).forEach(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(SQL_SELECT)) {
     q.call1(mapper, argument1, argument2).ifPresent(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sql</code> - The SQL of the query.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The query object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#query(org.springframework.core.io.Resource)"><code>query(Resource)</code></a>, 
<a href="#update(java.lang.String)"><code>update(String)</code></a>, 
<a href="SQLQueries.html" title="class in uk.ac.manchester.spinnaker.alloc.db"><code>SQLQueries</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="query(java.lang.String,boolean)">query</a></h3>
<div class="memberSignature"><span class="returnType"><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></span>&nbsp;<span class="memberName">query</span>&#8203;(<span class="arguments"><a href="https://errorprone.info/api/latest/com/google/errorprone/annotations/CompileTimeConstant.html?is-external=true" title="class or interface in com.google.errorprone.annotations" class="externalLink">@CompileTimeConstant</a>
<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;sql,
boolean&nbsp;lockType)</span></div>
<div class="block">Create a new query. Usage pattern:
 <pre>
 try (var q = conn.query(SQL_SELECT, false)) {
     for (var value : q.call(mapper, argument1, argument2)) {
         // Do something with the mapped row
     }
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(SQL_SELECT, false)) {
     q.call(mapper, argument1, argument2).forEach(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(SQL_SELECT, false)) {
     q.call1(mapper, argument1, argument2).ifPresent(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sql</code> - The SQL of the query.</dd>
<dd><code>lockType</code> - Whether we expect to have a write lock. This is vital</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The query object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#query(org.springframework.core.io.Resource)"><code>query(Resource)</code></a>, 
<a href="#update(java.lang.String)"><code>update(String)</code></a>, 
<a href="SQLQueries.html" title="class in uk.ac.manchester.spinnaker.alloc.db"><code>SQLQueries</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="query(org.springframework.core.io.Resource)">query</a></h3>
<div class="memberSignature"><span class="returnType"><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></span>&nbsp;<span class="memberName">query</span>&#8203;(<span class="arguments"><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html?is-external=true" title="class or interface in org.springframework.core.io" class="externalLink">Resource</a>&nbsp;sqlResource)</span></div>
<div class="block">Create a new query.
 <pre>
 try (var q = conn.query(sqlSelectResource)) {
     for (var value : q.call(mapper, argument1, argument2)) {
         // Do something with the mapped row
     }
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(sqlSelectResource)) {
     q.call(mapper, argument1, argument2).forEach(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(sqlSelectResource)) {
     q.call1(mapper, argument1, argument2).ifPresent(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sqlResource</code> - Reference to the SQL of the query.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The query object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#query(java.lang.String)"><code>query(String)</code></a>, 
<a href="#update(org.springframework.core.io.Resource)"><code>update(Resource)</code></a>, 
<a href="SQLQueries.html" title="class in uk.ac.manchester.spinnaker.alloc.db"><code>SQLQueries</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="query(org.springframework.core.io.Resource,boolean)">query</a></h3>
<div class="memberSignature"><span class="returnType"><a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Query</a></span>&nbsp;<span class="memberName">query</span>&#8203;(<span class="arguments"><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html?is-external=true" title="class or interface in org.springframework.core.io" class="externalLink">Resource</a>&nbsp;sqlResource,
boolean&nbsp;lockType)</span></div>
<div class="block">Create a new query.
 <pre>
 try (var q = conn.query(sqlSelectResource, false)) {
     for (var value : q.call(mapper, argument1, argument2)) {
         // Do something with the mapped row
     }
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(sqlSelectResource, false)) {
     q.call(mapper, argument1, argument2).forEach(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre>
 or:
 <pre>
 try (var q = conn.query(sqlSelectResource, false)) {
     q.call1(mapper, argument1, argument2).ifPresent(value -&gt; {
         // Do something with the mapped row
     });
 }
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sqlResource</code> - Reference to the SQL of the query.</dd>
<dd><code>lockType</code> - Whether we expect to have a write lock. This is vital
            only when the query is an <code>UPDATE RETURNING</code>.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The query object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#query(java.lang.String)"><code>query(String)</code></a>, 
<a href="#update(org.springframework.core.io.Resource)"><code>update(Resource)</code></a>, 
<a href="SQLQueries.html" title="class in uk.ac.manchester.spinnaker.alloc.db"><code>SQLQueries</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="update(java.lang.String)">update</a></h3>
<div class="memberSignature"><span class="returnType"><a href="DatabaseAPI.Update.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Update</a></span>&nbsp;<span class="memberName">update</span>&#8203;(<span class="arguments"><a href="https://errorprone.info/api/latest/com/google/errorprone/annotations/CompileTimeConstant.html?is-external=true" title="class or interface in com.google.errorprone.annotations" class="externalLink">@CompileTimeConstant</a>
<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;sql)</span></div>
<div class="block">Create a new update. Usage pattern:
 <pre>
 try (var u = conn.update(SQL_UPDATE)) {
     int numRows = u.call(argument1, argument2);
 }
 </pre>
 or:
 <pre>
 try (var u = conn.update(SQL_INSERT)) {
     for (var key : u.keys(argument1, argument2)) {
         // Do something with the key
     }
 }
 </pre>
 or even:
 <pre>
 try (var u = conn.update(SQL_INSERT)) {
     u.key(argument1, argument2).ifPresent(key -&gt; {
         // Do something with the key
     });
 }
 </pre>
 <p>
 <strong>Note:</strong> If you use a <code>RETURNING</code> clause then
 you should use a <a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db"><code>DatabaseAPI.Query</code></a> with the <code>lockType</code> set to
 <code>true</code>.
 <em><code>RETURNING</code> clauses are not supported by MySQL.</em></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sql</code> - The SQL of the update.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The update object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#update(org.springframework.core.io.Resource)"><code>update(Resource)</code></a>, 
<a href="#query(java.lang.String)"><code>query(String)</code></a>, 
<a href="SQLQueries.html" title="class in uk.ac.manchester.spinnaker.alloc.db"><code>SQLQueries</code></a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="update(org.springframework.core.io.Resource)">update</a></h3>
<div class="memberSignature"><span class="returnType"><a href="DatabaseAPI.Update.html" title="interface in uk.ac.manchester.spinnaker.alloc.db">DatabaseAPI.Update</a></span>&nbsp;<span class="memberName">update</span>&#8203;(<span class="arguments"><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/Resource.html?is-external=true" title="class or interface in org.springframework.core.io" class="externalLink">Resource</a>&nbsp;sqlResource)</span></div>
<div class="block">Create a new update.
 <pre>
 try (var u = conn.update(sqlUpdateResource)) {
     int numRows = u.call(argument1, argument2);
 }
 </pre>
 or:
 <pre>
 try (var u = conn.update(sqlInsertResource)) {
     for (var key : u.keys(argument1, argument2)) {
         // Do something with the key
     }
 }
 </pre>
 or even:
 <pre>
 try (var u = conn.update(sqlInsertResource)) {
     u.key(argument1, argument2).ifPresent(key -&gt; {
         // Do something with the key
     });
 }
 </pre>
 <p>
 <strong>Note:</strong> If you use a <code>RETURNING</code> clause then
 you should use a <a href="DatabaseAPI.Query.html" title="interface in uk.ac.manchester.spinnaker.alloc.db"><code>DatabaseAPI.Query</code></a> with the <code>lockType</code> set to
 <code>true</code>.
 <em><code>RETURNING</code> clauses are not supported by MySQL.</em></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sqlResource</code> - Reference to the SQL of the update.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The update object.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#update(java.lang.String)"><code>update(String)</code></a>, 
<a href="#query(org.springframework.core.io.Resource)"><code>query(Resource)</code></a>, 
<a href="SQLQueries.html" title="class in uk.ac.manchester.spinnaker.alloc.db"><code>SQLQueries</code></a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DatabaseAPI.Connection.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2018&#x2013;2025 <a href="https://apt.cs.manchester.ac.uk/projects/SpiNNaker/">SpiNNaker Team @ University of Manchester</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
