<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>uk.ac.manchester.spinnaker.alloc.proxy (SpiNNaker Java Host 7.4.2 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: uk.ac.manchester.spinnaker.alloc.proxy">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#package">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li><a href="#related-package-summary">Related Packages</a>&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package uk.ac.manchester.spinnaker.alloc.proxy" class="title">Package uk.ac.manchester.spinnaker.alloc.proxy</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">uk.ac.manchester.spinnaker.alloc.proxy</span></div>
<section class="package-description" id="package-description">
<div class="block">SpiNNaker message proxying support code. The protocol uses binary message
 frames within a websocket. That websocket will have been opened within an
 HTTPS-encrypted session where the session's user was authorised to access the
 particular job that is the context for the websocket. Messages sent via the
 protocol can only ever access boards allocated to the job.
 <p>
 The protocol has five messages that clients can send, three of which have
 replies and one of which can also be sent from the server/proxy to the
 client. All messages consist of a sequence of little-endian words, possibly
 followed by some payload data (of length limited by the maximum size of a
 SpiNNaker SDP or SpiNNaker boot message; the framing does not itself impose a
 maximum message length):
 </p>
 <table border="1" class="protocol">
 <caption style="display:none">Protocol inside web socket</caption>
 <tr>
 <th>Name</th>
 <th>Request Layout (words)</th>
 <th>Response Layout (words)</th>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#openConnectedChannel(java.nio.ByteBuffer)">Open
 Connected Channel</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN"><code>0</code></a>
 <td>Correlation&nbsp;ID
 <td>Chip&nbsp;X
 <td>Chip&nbsp;Y
 <td>UDP&nbsp;Port on Chip
 </tr>
 </table>
 </td>
 <td>
 <table border="1" class="protocolresponse">
 <caption style="display:none">Response</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN"><code>0</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID
 </tr>
 </table>
 </td>
 </tr>
 <tr>
 <td colspan=2>Establish a UDP socket that will talk to the given Ethernet
 chip within the allocation. Returns an ID that can be used to refer to that
 channel. Note that opening a socket declares that you are prepared to receive
 messages from SpiNNaker on it, but does not mean that SpiNNaker will send any
 messages that way. The correlation ID is caller-nominated, and just passed
 back uninterpreted in the response message.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#closeChannel(java.nio.ByteBuffer)">Close
 Channel</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#CLOSE"><code>1</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID
 </tr>
 </table>
 </td>
 <td>
 <table border="1" class="protocolresponse">
 <caption style="display:none">Response</caption>
 <tr>
 <td><a href="ProxyOp.html#CLOSE"><code>1</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID (if closed) or <code>0</code> (not closed)
 </tr>
 </table>
 </td>
 </tr>
 <tr>
 <td colspan=2>Close an established UDP socket, given its ID. Returns the ID
 on success, and zero on failure (e.g., because the socket is already closed).
 The correlation ID is caller-nominated, and just passed back uninterpreted in
 the response message. The channel may have been opened with either <em>Open
 Connected Channel</em> or <em>Open Unconnected Channel</em>.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#sendMessage(java.nio.ByteBuffer)">Send
 Message</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#MESSAGE"><code>2</code></a>
 <td>Channel&nbsp;ID
 <td>Raw&nbsp;message&nbsp;bytes...
 </tr>
 </table>
 </td>
 <td>N/A</td>
 </tr>
 <tr>
 <td colspan=2>Send a message to SpiNNaker on a particular established UDP
 configuration. This is technically one-way, but messages come back in the
 same format (i.e., a 4 byte prefix to say that it is a message, and another 4
 bytes to say what socket this is talking about). The raw message bytes
 (<em>including</em> the half-word of ethernet frame padding) follow the
 header. Messages sent on connections opened with <em>Open Unconnected
 Channel</em> will be ignored.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#openUnconnectedChannel(java.nio.ByteBuffer)">Open
 Unconnected Channel</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN_UNCONNECTED"><code>3</code></a>
 <td>Correlation&nbsp;ID
 </tr>
 </table>
 </td>
 <td>
 <table border="1" class="protocolresponse">
 <caption style="display:none">Response</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN_UNCONNECTED"><code>3</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID
 <td>IP&nbsp;Address
 <td>UDP&nbsp;Port on Server
 </tr>
 </table>
 </td>
 </tr>
 <tr>
 <td colspan=2>Establish a UDP socket that will receive from the allocation.
 Returns an ID that can be used to refer to that channel. Note that opening a
 socket declares that you are prepared to receive messages from SpiNNaker on
 it, but does not mean that SpiNNaker will send any messages that way. The
 correlation ID is caller-nominated, and just passed back uninterpreted in the
 response message. Also included in the response message is the IPv4 address
 (big-endian binary encoding; one word) and server UDP port for the
 connection, allowing the client to instruct SpiNNaker to send messages to the
 socket on the server side of the channel (which is not necessarily accessible
 from anything other than SpiNNaker). No guarantee is made about whether any
 message from anything other than a board in the job will be passed on.
 Sending on the channel will only be possible with the <em>Send Message
 To</em> operation.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#sendMessageTo(java.nio.ByteBuffer)">Send Message
 To</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#MESSAGE_TO"><code>4</code></a>
 <td>Channel&nbsp;ID
 <td>Chip&nbsp;X
 <td>Chip&nbsp;Y
 <td>UDP&nbsp;Port on Chip
 <td>Raw&nbsp;message&nbsp;bytes...
 </tr>
 </table>
 </td>
 <td>N/A</td>
 </tr>
 <tr>
 <td colspan=2>Send a message to a SpiNNaker board (identified by coordinates
 of its ethernet chip) to a given UDP port. This is one-way. The raw message
 bytes (<em>including</em> the half-word of ethernet frame padding) follow the
 header. The channel must have been opened with <em>Open Unconnected
 Channel</em>. Any responses come back as standard messages; if doing calls
 with this, it is advised to only have one in flight at a time.</td>
 </tr>
 <tr>
 <td rowspan=2>Error</td>
 <td>N/A</td>
 <td>
 <table border="1" class="protocolresponse">
 <caption style="display:none">Response</caption>
 <tr>
 <td><a href="ProxyOp.html#ERROR"><code>5</code></a>
 <td>Correlation&nbsp;ID
 <td>UTF-8&nbsp;error&nbsp;message&nbsp;bytes...
 </tr>
 </table>
 </td>
 </tr>
 <tr>
 <td colspan=2>A response that may be given to <em>Open Connected
 Channel</em>, <em>Close Channel</em>, or <em>Open Unconnected Channel</em>.
 This indicates that a failure to perform an operation occurred. The
 correlation ID is whatever ID was provided in the request message that this
 is a response to. The remainder of the message is UTF-8 text that provides
 some human-readable description of what the problem was, if the server
 chooses to provide one.
 Note that the server is never required to send this message; it may summarily
 close the websocket instead.</td>
 </tr>
 </table>
 <p>
 <em>Protocol-level errors</em> (such as not following the protocol!) may be
 responded to by the server arbitrarily closing the websocket, in which case
 any proxied connections it has open through the websocket will also be
 closed.</div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="../package-summary.html">uk.ac.manchester.spinnaker.alloc</a></div>
<div class="col-last even-row-color">
<div class="block">Allocation service for SpiNNaker.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab3" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab3', 2)" class="table-tab">Enum Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel" aria-labelledby="class-summary-tab0">
<div class="summary-table two-column-summary">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="ProxyCore.html" title="class in uk.ac.manchester.spinnaker.alloc.proxy">ProxyCore</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">The main proxy class for a particular web socket session.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab3"><a href="ProxyOp.html" title="enum class in uk.ac.manchester.spinnaker.alloc.proxy">ProxyOp</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab3">
<div class="block">Message codes used in proxy operations.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="ProxyUDPConnection.html" title="class in uk.ac.manchester.spinnaker.alloc.proxy">ProxyUDPConnection</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">The low-level handler for proxy connections.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="SpinWSHandler.html" title="class in uk.ac.manchester.spinnaker.alloc.proxy">SpinWSHandler</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Initial handler for web sockets.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2018&#x2013;2026 <a href="https://apt.cs.manchester.ac.uk/projects/SpiNNaker/">SpiNNaker Team @ University of Manchester</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
