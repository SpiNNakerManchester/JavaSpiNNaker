<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>uk.ac.manchester.spinnaker.alloc.proxy (SpiNNaker Allocation Server 6.0.1-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: uk.ac.manchester.spinnaker.alloc.proxy">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="package-declaration">
<script type="text/javascript">var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<div class="header">
<h1 title="Package" class="title">Package&nbsp;uk.ac.manchester.spinnaker.alloc.proxy</h1>
</div>
<div class="contentContainer">
<section class="packageDescription"><a id="package.description">
<!--   -->
</a>
<div class="block">SpiNNaker message proxying support code. The protocol uses binary message
 frames within a websocket. That websocket will have been opened within an
 HTTPS-encrypted session where the session's user was authorised to access the
 particular job that is the context for the websocket. Messages sent via the
 protocol can only ever access boards allocated to the job.
 <p>
 The protocol has five messages that clients can send, three of which have
 replies and one of which can also be sent from the server/proxy to the
 client. All messages consist of a sequence of little-endian words, possibly
 followed by some payload data (of length limited by the maximum size of a
 SpiNNaker SDP or SpiNNaker boot message; the framing does not itself impose a
 maximum message length):
 </p>
 <table border="1" class="protocol">
 <caption style="display:none">Protocol inside web socket</caption>
 <tr>
 <th>Name</th>
 <th>Request Layout (words)</th>
 <th>Response Layout (words)</th>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#openConnectedChannel(java.nio.ByteBuffer)">Open
 Connected Channel</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN"><code>0</code></a>
 <td>Correlation&nbsp;ID
 <td>Chip&nbsp;X
 <td>Chip&nbsp;Y
 <td>UDP&nbsp;Port on Chip
 </tr>
 </table>
 </td>
 <td>
 <table border="1" class="protocolresponse">
 <caption style="display:none">Response</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN"><code>0</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID
 </tr>
 </table>
 </td>
 </tr>
 <tr>
 <td colspan=2>Establish a UDP socket that will talk to the given Ethernet
 chip within the allocation. Returns an ID that can be used to refer to that
 channel. Note that opening a socket declares that you are prepared to receive
 messages from SpiNNaker on it, but does not mean that SpiNNaker will send any
 messages that way. The correlation ID is caller-nominated, and just passed
 back uninterpreted in the response message.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#closeChannel(java.nio.ByteBuffer)">Close
 Channel</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#CLOSE"><code>1</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID
 </tr>
 </table>
 </td>
 <td>
 <table border="1" class="protocolresponse">
 <caption style="display:none">Response</caption>
 <tr>
 <td><a href="ProxyOp.html#CLOSE"><code>1</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID (if closed) or <code>0</code> (not closed)
 </tr>
 </table>
 </td>
 </tr>
 <tr>
 <td colspan=2>Close an established UDP socket, given its ID. Returns the ID
 on success, and zero on failure (e.g., because the socket is already closed).
 The correlation ID is caller-nominated, and just passed back uninterpreted in
 the response message. The channel may have been opened with either <em>Open
 Connected Channel</em> or <em>Open Unconnected Channel</em>.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#sendMessage(java.nio.ByteBuffer)">Send
 Message</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#MESSAGE"><code>2</code></a>
 <td>Channel&nbsp;ID
 <td>Raw&nbsp;message&nbsp;bytes...
 </tr>
 </table>
 </td>
 <td>N/A</td>
 </tr>
 <tr>
 <td colspan=2>Send a message to SpiNNaker on a particular established UDP
 configuration. This is technically one-way, but messages come back in the
 same format (i.e., a 4 byte prefix to say that it is a message, and another 4
 bytes to say what socket this is talking about). The raw message bytes
 (<em>including</em> the half-word of ethernet frame padding) follow the
 header. Messages sent on connections opened with <em>Open Unconnected
 Channel</em> will be ignored.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#openUnconnectedChannel(java.nio.ByteBuffer)">Open
 Unconnected Channel</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN_UNCONNECTED"><code>3</code></a>
 <td>Correlation&nbsp;ID
 </tr>
 </table>
 </td>
 <td>
 <table border="1" class="protocolresponse">
 <caption style="display:none">Response</caption>
 <tr>
 <td><a href="ProxyOp.html#OPEN_UNCONNECTED"><code>3</code></a>
 <td>Correlation&nbsp;ID
 <td>Channel&nbsp;ID
 <td>IP&nbsp;Address
 <td>UDP&nbsp;Port on Server
 </tr>
 </table>
 </td>
 </tr>
 <tr>
 <td colspan=2>Establish a UDP socket that will receive from the allocation.
 Returns an ID that can be used to refer to that channel. Note that opening a
 socket declares that you are prepared to receive messages from SpiNNaker on
 it, but does not mean that SpiNNaker will send any messages that way. The
 correlation ID is caller-nominated, and just passed back uninterpreted in the
 response message. Also included in the response message is the IPv4 address
 (big-endian binary encoding; one word) and server UDP port for the
 connection, allowing the client to instruct SpiNNaker to send messages to the
 socket on the server side of the channel (which is not necessarily accessible
 from anything other than SpiNNaker). No guarantee is made about whether any
 message from anything other than a board in the job will be passed on.
 Sending on the channel will only be possible with the <em>Send Message
 To</em> operation.</td>
 </tr>
 <tr>
 <td rowspan=2><a href="ProxyCore.html#sendMessageTo(java.nio.ByteBuffer)">Send Message
 To</a></td>
 <td>
 <table border="1" class="protocolrequest">
 <caption style="display:none">Request</caption>
 <tr>
 <td><a href="ProxyOp.html#MESSAGE_TO"><code>4</code></a>
 <td>Channel&nbsp;ID
 <td>Chip&nbsp;X
 <td>Chip&nbsp;Y
 <td>UDP&nbsp;Port on Chip
 <td>Raw&nbsp;message&nbsp;bytes...
 </tr>
 </table>
 </td>
 <td>N/A</td>
 </tr>
 <tr>
 <td colspan=2>Send a message to a SpiNNaker board (identified by coordinates
 of its ethernet chip) to a given UDP port. This is one-way. The raw message
 bytes (<em>including</em> the half-word of ethernet frame padding) follow the
 header. The channel must have been opened with <em>Open Unconnected
 Channel</em>. Any responses come back as standard messages; if doing calls
 with this, it is advised to only have one in flight at a time.</td>
 </tr>
 </table>
 <p>
 <em>Protocol-level errors</em> (such as not following the protocol!) may be
 responded to by the server arbitrarily closing the websocket, in which case
 any proxied connections it has open through the websocket will also be
 closed.</div>
</section>
<section class="summary">
<ul class="blockList">
<li class="blockList">
<div class="typeSummary">
<table>
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="ProxyCore.html" title="class in uk.ac.manchester.spinnaker.alloc.proxy">ProxyCore</a></th>
<td class="colLast">
<div class="block">The main proxy class for a particular web socket session.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ProxyUDPConnection.html" title="class in uk.ac.manchester.spinnaker.alloc.proxy">ProxyUDPConnection</a></th>
<td class="colLast">
<div class="block">The low-level handler for proxy connections.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="SpinWSHandler.html" title="class in uk.ac.manchester.spinnaker.alloc.proxy">SpinWSHandler</a></th>
<td class="colLast">
<div class="block">Initial handler for web sockets.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="blockList">
<div class="typeSummary">
<table>
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="ProxyOp.html" title="enum in uk.ac.manchester.spinnaker.alloc.proxy">ProxyOp</a></th>
<td class="colLast">
<div class="block">Message codes used in proxy operations.</div>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</section>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2018&#x2013;2022 <a href="http://apt.cs.manchester.ac.uk/projects/SpiNNaker/">SpiNNaker Team @ University of Manchester</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
