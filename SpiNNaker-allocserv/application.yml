# Copyright (c) 2025 The University of Manchester
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

spalloc:
  working-directory: /app
  auth:
    add-dummy-user: false
    dummy-random-pass: false
    openid:
      id: ${EBRAINS_OPENID_CLIENT_ID}
      secret: ${EBRAINS_OPENID_CLIENT_SECRET}
      redirect: https://${SPRING_SERVER_HOST}/spalloc/system/perform_oidc/{action}/code/{registrationId}
  sqlite:
    performance-log: true
  compat:
    enable: true
    host: 0.0.0.0
    port: 22244
    # This user and group needs to be created
    service-user: ${SPALLOC_COMPAT_USER}
    service-group: ${SPALLOC_COMPAT_GROUP}
  transceiver:
    period: 3s
    # dummy: true
  datasource:
    jdbc-url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
  allocator:
    importance-span: 1200
    emergencyStopCommandCode: ${SPALLOC_EMERGENCY_STOP_CODE}
  historical-data:
    datasource:
      jdbc-url: ${SPRING_HISTORICAL_DATASOURCE_URL}
      username: ${SPRING_DATASOURCE_USERNAME}
      password: ${SPRING_DATASOURCE_PASSWORD}
  quota:
    nmpi-url: https://nmpi-v3.hbpneuromorphic.eu/
    nmpi-api-key: ${SPALLOC_NMPI_API_KEY}
    nmpi-platform: SpiNNaker
  proxy:
    local-host: ${SPALLOC_PROXY_LOCAL_HOST}

server:
  port: 9091

logging:
  file:
    name: spalloc.log
    path: ${spalloc.working-directory}
  level:
    root: INFO

spring:
  mvc:
    servlet:
      path: /spalloc

cxf:
  path: /spalloc/srv